<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>

  <meta charset="utf-8" />
  <title>Task 6</title>
  <script src="https://code.jquery.com/jquery-3.6.0.slim.min.js"
    integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI=" crossorigin="anonymous"></script>

</head>

<body>
  <script type="application/javascript">
    $(document).ready(() => {
      function createFamilyTree() {
        $("body").append(
          $('<table></table>').append(
            $('<thead></thead').append(
              $('<tr></tr>').append(
                $('<th></th>').text('Firstname'),
                $('<th></th>').text('Lastname')
              )
            ),
            $('<tbody></tbody>')
          )
        );
      }

      function createForm() {
        $form = $("<form></form>");

                $("table").before("<input type='text'>");
                $("table").before("<input type='text'>");
                $("table").before(`
                <select>
                  <option value='before'>Before</option>
                  <option value='after'">After</option>
                </select>
            `);
                $("table").before("<input type='submit'>");
        $('input:nth-of-type(3)').click(() => {
          firstName = $('input').val();
          lastName = $('input:nth-of-type(2)').val();
          position = $('select').val();
          addNewMember(firstName, lastName, position);
        });
      }

      function addNewMember(firstName, lastName, position) {
        const $member = $(`<tr class='${firstName}${lastName}'></tr>`).append(
            $('<td></td>').text(firstName),
            $('<td></td>').text(lastName),
            $('<td></td>').text('(X)').css('background-color', "orange").click(() => {
              $(`tr.${firstName}${lastName}`).remove();
            })
          );
        
        if (position === 'before') {
          $('table tbody').prepend($member);
        } else {
          $('table tbody').append($member);
        }
      }
      createFamilyTree();
      createForm();
    });

  </script>
</body>

</html>
