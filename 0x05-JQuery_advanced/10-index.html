<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>

  <meta charset="utf-8" />
  <title>Task 10</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"
    integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
</head>

<body>
  <script type="application/javascript">
    $(document).ready(() => {
      function addPostRow(data) {
        $('body').append(
          `<p>
            <span>Post created with id ${data.id}, title:
              ${data.title}, author: ${data.author}
          </p>`
        );
      }

        function listPost() {
          const api = 'http://localhost:3000/posts';
          $.get(api, {
            _sort: 'id'
           }, (posts, status, data) => {
            if(data.readyState === 4 && data.status === 200){
              for (post in posts) {
                addPostRow(posts[post]);
              }
            }
            
          }).fail (() => {
            alert('Server Error');
          });
        }
      listPost();
    });

  </script>
</body>

</html>
